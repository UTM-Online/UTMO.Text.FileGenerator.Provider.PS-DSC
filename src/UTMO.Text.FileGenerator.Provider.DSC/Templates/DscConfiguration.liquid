{% extends "script_base" %}
{% block script %}
Configuration {{ FullName }}
{
{%- for module in RequiredModules %}
    {% if module.UseAlternateFormat == true -%}
    Import-DscResource -ModuleName @{ModuleName = '{{ module.Name }}'; RequiredVersion = '{{ module.Version }}'}
    {% else -%}
    Import-DscResource -ModuleName '{{ module.Name }}' {% if module.Version and module.Name != "PSDesiredStateConfiguration" %}-ModuleVersion '{{ module.Version }}'{% endif -%}
    {% endif -%}
{%- endfor %}
{% for resource in ConfigurationResources %}{{ resource.resource_id }} {{ resource.name }}
    {
        {% if resource.depends_on != empty %}DependsOn = '[{% for item in resource.depends_on %}{{ item }}{% if forloop.last == false %}, {% endif %}{% endfor %}]'{% endif %}
        {% for value in resource.property_bag %}{{ value.key }} = '{{ value.value }}'{% if forloop.last == false %}`{% endif %}{% endfor %}
    }{% endfor %}
}

{{ FullName }} -OutputPath $OutputPath
{% endblock %}